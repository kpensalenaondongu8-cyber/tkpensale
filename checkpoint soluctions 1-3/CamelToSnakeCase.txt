package piscine

func CamelToSnakeCase(s string) string {
	if s == "" {
		return ""
	}

	prevUpper := false
	for i, r := range s {
		if (r < 'A' || r > 'Z') && (r < 'a' || r > 'z') {
			return s
		}
		if r >= 'A' && r <= 'Z' {
			if prevUpper || i == len(s)-1 {
				return s
			}
			prevUpper = true
		} else {
			prevUpper = false
		}
	}

	result := ""
	for i, r := range s {
		if r >= 'A' && r <= 'Z' && i != 0 {
			result += "_"
		}
		result += string(r)
	}
	return result
}
